<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15">
<link rel="stylesheet" href="/css/blueprint/screen.css" type="text/css" media="screen, projection">
<link rel="stylesheet" href="/css/blueprint/print.css" type="text/css" media="print">	
<!--[if lt IE 8]><link rel="stylesheet" href="/css/blueprint/ie.css" type="text/css" media="screen, projection"><![endif]-->

<link type="text/css" rel="stylesheet" href="/css/zookeeper_dashboard.css" />
<title>ZooKeeper Dashboard</title>
<SCRIPT type="text/javascript" src="/js/http.js">
</SCRIPT>
<SCRIPT type="text/javascript">
function action(id) {
  var e = document.getElementById("action"+id);
  var operation = e.options[e.selectedIndex].value;
  var ip =
  e.parentElement.parentElement.firstElementChild.firstElementChild.innerHTML; 

  var url = operation + "?ip=" + ip; 
  if (operation != "") {
      httpGet(url);
      location.reload();
  }
}
</SCRIPT>
</head>

<body>
<div class="container">
<h1>ZooKeeper Dashboard</h1>
<hr/>
<div class="span-24 last">
<h2>Idle Information</h2>

<table>
<tr><th>server</th><th>status</th><th>action</th></tr>
{% for ip, status in idle_data.items %}
<tr class="{% cycle 'oddrow' 'evenrow' %}">
  <td><a href="cluster/idle/{{forloop.counter}}">{{ ip }}</a> </td>
  <td>{{status}} </td>
  <td>
    <select id="action{{forloop.counter}}" onchange="action({{forloop.counter}})">
      <option value=""></option>
      <option value="deploy">deploy</option>
      <option value="delete">delete</option>
    </select>
  </td>
</tr>
  {% endfor %}
</table>
<p>
</div>

<hr/>
<div class="span-24 last">
<h2>Idle Add</h2>
<form method="post">
  {{idf.as_p}}
  <input type="submit" value="submit" />
</form>
</div>
<hr/>
<div class="span-24 last small quiet">
<address>
<a href="http://github.com/phunt/zookeeper_dashboard#readme">zookeeper_dashboard</a> was created by
<a href="http://twitter.com/phunt">Patrick Hunt</a> and hacked by
<a href="http://github.com/kingFighter">Kaiyang Lv</a>
</address>
</div>
</div>

</body></html>
